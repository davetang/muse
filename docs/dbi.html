<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2024-07-26" />

<title>Interfacing with databases in R</title>

<script src="site_libs/header-attrs-2.27/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/main/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My blog</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davetang/muse">
    <span class="fa fa-github"></span>
     
    Source code
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Interfacing with databases in R</h1>
<h4 class="date">2024-07-26</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
workflowr <span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2024-07-26
</p>
<p>
<strong>Checks:</strong> <span
class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7
<span class="glyphicon glyphicon-exclamation-sign text-danger"
aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>muse/</code> <span
class="glyphicon glyphicon-question-sign" aria-hidden="true"
title="This is the local directory in which the code in this file was executed.">
</span>
</p>
<p>
This reproducible <a href="https://rmarkdown.rstudio.com">R Markdown</a>
analysis was created with <a
  href="https://github.com/workflowr/workflowr">workflowr</a> (version
1.7.1). The <em>Checks</em> tab describes the reproducibility checks
that were applied when the results were created. The <em>Past
versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date
</a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git
repository, you know the exact version of the code that produced these
results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the
global environment can affect the analysis in your R Markdown file in
unknown ways. For reproduciblity itâ€™s best to always run the code in an
empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20200712code">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Seed:</strong>
<code>set.seed(20200712)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20200712code"
class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20200712)</code> was run prior to running
the code in the R Markdown file. Setting a seed ensures that any results
that rely on randomness, e.g. subsampling or permutations, are
reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Session information:</strong>
recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded"
class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package
versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be
confident that you successfully produced the results during this
run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr
project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomdavetangmusetreee897914d97e671477085262eb10edffcfd46e576targetblanke897914a">
<span class="glyphicon glyphicon-ok text-success"
aria-hidden="true"></span> <strong>Repository version:</strong>
<a href="https://github.com/davetang/muse/tree/e897914d97e671477085262eb10edffcfd46e576" target="_blank">e897914</a>
</a>
</p>
</div>
<div
id="strongRepositoryversionstrongahrefhttpsgithubcomdavetangmusetreee897914d97e671477085262eb10edffcfd46e576targetblanke897914a"
class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development
and connecting the code version to the results is critical for
reproducibility.
</p>
<p>
The results in this page were generated with repository version
<a href="https://github.com/davetang/muse/tree/e897914d97e671477085262eb10edffcfd46e576" target="_blank">e897914</a>.
See the <em>Past versions</em> tab to see a history of the changes made
to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for
the analysis have been committed to Git prior to generating the results
(you can use <code>wflow_publish</code> or
<code>wflow_git_commit</code>). workflowr only checks the R Markdown
file, but you know if there are other scripts or data files that it
depends on. Below is the status of the Git repository when the results
were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    r_packages_4.3.3/
    Ignored:    r_packages_4.4.0/

</code></pre>
<p>
Note that any generated files, e.g.Â HTML, png, CSS, etc., are not
included in this status report because it is ok for generated content to
have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">
<p>
These are the previous versions of the repository in which changes were
made to the R Markdown (<code>analysis/dbi.Rmd</code>) and HTML
(<code>docs/dbi.html</code>) files. If youâ€™ve configured a remote Git
repository (see <code>?wflow_git_remote</code>), click on the hyperlinks
in the table below to view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/davetang/muse/blob/e897914d97e671477085262eb10edffcfd46e576/analysis/dbi.Rmd" target="_blank">e897914</a>
</td>
<td>
Dave Tang
</td>
<td>
2024-07-26
</td>
<td>
dbplyr basics
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/davetang/muse/47f20cf31f4de4388c1b66e1add50d2703b891ab/docs/dbi.html" target="_blank">47f20cf</a>
</td>
<td>
Dave Tang
</td>
<td>
2024-07-26
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/davetang/muse/blob/a9be34eab760c5ce561cb533f086c49e61ea3d3d/analysis/dbi.Rmd" target="_blank">a9be34e</a>
</td>
<td>
Dave Tang
</td>
<td>
2024-07-26
</td>
<td>
Connect to SQLite and make some basic queries
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/davetang/muse/69177880b83ba48e537cdbdcbee635fc27f779ce/docs/dbi.html" target="_blank">6917788</a>
</td>
<td>
Dave Tang
</td>
<td>
2024-07-17
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/davetang/muse/blob/bb8ad42304240ea7b35290b8f8efdcf35e1ff5e2/analysis/dbi.Rmd" target="_blank">bb8ad42</a>
</td>
<td>
Dave Tang
</td>
<td>
2024-07-17
</td>
<td>
Database basics
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The <a
href="https://cran.r-project.org/web/packages/DBI/index.html">{DBI}
package</a> provides:</p>
<blockquote>
<p>A database interface definition for communication between R and
relational database management systems. All classes in this package are
virtual and need to be extended by the various R/DBMS
implementations.</p>
</blockquote>
<p>A database table can be thought of as a data frame, however there are
three high-level differences between them:</p>
<ol style="list-style-type: decimal">
<li><p>Database tables are stored on disk and can be arbitrarily large,
whereas data frames are stored in memory and are fundamentally
limited.</p></li>
<li><p>Database tables almost always have indexes making it possible to
quickly find rows of interest without having to look at every single
row. Data frames donâ€™t have indexes but data tables do, which is one of
the reasons why theyâ€™re so fast.</p></li>
<li><p>Most classical databases are optimised for rapidly collecting
data and not for analysing existing data. These databases are called
<em>row-oriented</em> because the data is stored row by row, rather than
column by column like data frames. More recently, thereâ€™s been much
development of <em>column-oriented</em> databases that make analysing
existing data much faster.</p></li>
</ol>
<p>Databases are run by database management systems (DBMS), which come
in three basic forms:</p>
<ol style="list-style-type: decimal">
<li><p>Client-server DBMS run on a powerful central server, which you
connect from your computer (the client). They are useful for sharing
data with multiple people and popular client-server DBMS include
PostgreSQL, MariaDB, SQL Server, and Oracle.</p></li>
<li><p>Cloud DBMS, like Snowflake, Amazonâ€™s RedShift, and Googleâ€™s
BigQuery, are similar to client-server DBMS, but they run in the cloud,
taking advantage of cloud capabilities.</p></li>
<li><p><em>In-process</em> DBMS, like SQLite or duckdb, run entirely on
your computer. Theyâ€™re great for working with large datasets where you
are the primary user.</p></li>
</ol>
</div>
<div id="connecting-to-a-database" class="section level2">
<h2>Connecting to a database</h2>
<p>To connect to a database in R, we need:</p>
<ol style="list-style-type: decimal">
<li>The DBI package because it provides a set of generic functions that
connect to the database.</li>
<li>A specific package tailored for the DBMS of interest; this package
translates the generic DBI commands into the specifics.</li>
</ol>
<p>The {RSQLite} package provides a SQLite interface for R.</p>
<blockquote>
<p>Embeds the SQLite database engine in R and provides an interface
compliant with the DBI package. The source for the SQLite engine and for
various extensions in a recent version is included. System libraries
will never be consulted because this package relies on static linking
for the plugins it includes; this also ensures a consistent experience
across all installations.</p>
</blockquote>
<p>SQLite database downloaded as per the post <a
href="sradb.html">Interfacing with the Sequence Read Archive in
R</a>.</p>
<pre class="r"><code>dbfile &lt;- &quot;/data2/sradb/SRAmetadb.sqlite&quot;
mydb &lt;- dbConnect(RSQLite::SQLite(), dbname = dbfile)
mydb</code></pre>
<pre><code>&lt;SQLiteConnection&gt;
  Path: /data2/sradb/SRAmetadb.sqlite
  Extensions: TRUE</code></pre>
</div>
<div id="dbi-basics" class="section level2">
<h2>DBI basics</h2>
<p>Lists all tables in the database.</p>
<pre class="r"><code>tabs &lt;- dbListTables(mydb)
tabs</code></pre>
<pre><code> [1] &quot;col_desc&quot;        &quot;experiment&quot;      &quot;metaInfo&quot;        &quot;run&quot;            
 [5] &quot;sample&quot;          &quot;sra&quot;             &quot;sra_ft&quot;          &quot;sra_ft_content&quot; 
 [9] &quot;sra_ft_segdir&quot;   &quot;sra_ft_segments&quot; &quot;study&quot;           &quot;submission&quot;     </code></pre>
<p>Neat trick to get the fields of a table.</p>
<pre class="r"><code>get_fields &lt;- &quot;SELECT * FROM run WHERE 1=0&quot;
DBI::dbGetQuery(mydb, get_fields)</code></pre>
<pre><code> [1] run_ID               bamFile              run_alias           
 [4] run_accession        broker_name          instrument_name     
 [7] run_date             run_file             run_center          
[10] total_data_blocks    experiment_accession experiment_name     
[13] sra_link             run_url_link         xref_link           
[16] run_entrez_link      ddbj_link            ena_link            
[19] run_attribute        submission_accession sradb_updated       
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
<p>Save all table fields.</p>
<pre class="r"><code>table_fields &lt;- purrr::map(tabs, \(x){
  sql &lt;- paste0(&#39;SELECT * FROM &#39;, x, &#39; WHERE 1=0&#39;)
  DBI::dbGetQuery(mydb, sql)
})

names(table_fields) &lt;- tabs
table_fields[[1]]</code></pre>
<pre><code>[1] col_desc_ID   table_name    field_name    type          description  
[6] value_list    sradb_updated
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
<pre class="r"><code>table_fields</code></pre>
<pre><code>$col_desc
[1] col_desc_ID   table_name    field_name    type          description  
[6] value_list    sradb_updated
&lt;0 rows&gt; (or 0-length row.names)

$experiment
 [1] experiment_ID                 bamFile                      
 [3] fastqFTP                      experiment_alias             
 [5] experiment_accession          broker_name                  
 [7] center_name                   title                        
 [9] study_name                    study_accession              
[11] design_description            sample_name                  
[13] sample_accession              sample_member                
[15] library_name                  library_strategy             
[17] library_source                library_selection            
[19] library_layout                targeted_loci                
[21] library_construction_protocol spot_length                  
[23] adapter_spec                  read_spec                    
[25] platform                      instrument_model             
[27] platform_parameters           sequence_space               
[29] base_caller                   quality_scorer               
[31] number_of_levels              multiplier                   
[33] qtype                         sra_link                     
[35] experiment_url_link           xref_link                    
[37] experiment_entrez_link        ddbj_link                    
[39] ena_link                      experiment_attribute         
[41] submission_accession          sradb_updated                
&lt;0 rows&gt; (or 0-length row.names)

$metaInfo
[1] name  value
&lt;0 rows&gt; (or 0-length row.names)

$run
 [1] run_ID               bamFile              run_alias           
 [4] run_accession        broker_name          instrument_name     
 [7] run_date             run_file             run_center          
[10] total_data_blocks    experiment_accession experiment_name     
[13] sra_link             run_url_link         xref_link           
[16] run_entrez_link      ddbj_link            ena_link            
[19] run_attribute        submission_accession sradb_updated       
&lt;0 rows&gt; (or 0-length row.names)

$sample
 [1] sample_ID            sample_alias         sample_accession    
 [4] broker_name          center_name          taxon_id            
 [7] scientific_name      common_name          anonymized_name     
[10] individual_name      description          sra_link            
[13] sample_url_link      xref_link            sample_entrez_link  
[16] ddbj_link            ena_link             sample_attribute    
[19] submission_accession sradb_updated       
&lt;0 rows&gt; (or 0-length row.names)

$sra
 [1] sra_ID                        SRR_bamFile                  
 [3] SRX_bamFile                   SRX_fastqFTP                 
 [5] run_ID                        run_alias                    
 [7] run_accession                 run_date                     
 [9] updated_date                  spots                        
[11] bases                         run_center                   
[13] experiment_name               run_url_link                 
[15] run_entrez_link               run_attribute                
[17] experiment_ID                 experiment_alias             
[19] experiment_accession          experiment_title             
[21] study_name                    sample_name                  
[23] design_description            library_name                 
[25] library_strategy              library_source               
[27] library_selection             library_layout               
[29] library_construction_protocol adapter_spec                 
[31] read_spec                     platform                     
[33] instrument_model              instrument_name              
[35] platform_parameters           sequence_space               
[37] base_caller                   quality_scorer               
[39] number_of_levels              multiplier                   
[41] qtype                         experiment_url_link          
[43] experiment_entrez_link        experiment_attribute         
[45] sample_ID                     sample_alias                 
[47] sample_accession              taxon_id                     
[49] common_name                   anonymized_name              
[51] individual_name               description                  
[53] sample_url_link               sample_entrez_link           
[55] sample_attribute              study_ID                     
[57] study_alias                   study_accession              
[59] study_title                   study_type                   
[61] study_abstract                center_project_name          
[63] study_description             study_url_link               
[65] study_entrez_link             study_attribute              
[67] related_studies               primary_study                
[69] submission_ID                 submission_accession         
[71] submission_comment            submission_center            
[73] submission_lab                submission_date              
[75] sradb_updated                
&lt;0 rows&gt; (or 0-length row.names)

$sra_ft
 [1] SRR_bamFile                   SRX_bamFile                  
 [3] SRX_fastqFTP                  run_ID                       
 [5] run_alias                     run_accession                
 [7] run_date                      updated_date                 
 [9] spots                         bases                        
[11] run_center                    experiment_name              
[13] run_url_link                  run_entrez_link              
[15] run_attribute                 experiment_ID                
[17] experiment_alias              experiment_accession         
[19] experiment_title              study_name                   
[21] sample_name                   design_description           
[23] library_name                  library_strategy             
[25] library_source                library_selection            
[27] library_layout                library_construction_protocol
[29] adapter_spec                  read_spec                    
[31] platform                      instrument_model             
[33] instrument_name               platform_parameters          
[35] sequence_space                base_caller                  
[37] quality_scorer                number_of_levels             
[39] multiplier                    qtype                        
[41] experiment_url_link           experiment_entrez_link       
[43] experiment_attribute          sample_ID                    
[45] sample_alias                  sample_accession             
[47] taxon_id                      common_name                  
[49] anonymized_name               individual_name              
[51] description                   sample_url_link              
[53] sample_entrez_link            sample_attribute             
[55] study_ID                      study_alias                  
[57] study_accession               study_title                  
[59] study_type                    study_abstract               
[61] center_project_name           study_description            
[63] study_url_link                study_entrez_link            
[65] study_attribute               related_studies              
[67] primary_study                 submission_ID                
[69] submission_accession          submission_comment           
[71] submission_center             submission_lab               
[73] submission_date               sradb_updated                
&lt;0 rows&gt; (or 0-length row.names)

$sra_ft_content
 [1] docid                            c0SRR_bamFile                   
 [3] c1SRX_bamFile                    c2SRX_fastqFTP                  
 [5] c3run_ID                         c4run_alias                     
 [7] c5run_accession                  c6run_date                      
 [9] c7updated_date                   c8spots                         
[11] c9bases                          c10run_center                   
[13] c11experiment_name               c12run_url_link                 
[15] c13run_entrez_link               c14run_attribute                
[17] c15experiment_ID                 c16experiment_alias             
[19] c17experiment_accession          c18experiment_title             
[21] c19study_name                    c20sample_name                  
[23] c21design_description            c22library_name                 
[25] c23library_strategy              c24library_source               
[27] c25library_selection             c26library_layout               
[29] c27library_construction_protocol c28adapter_spec                 
[31] c29read_spec                     c30platform                     
[33] c31instrument_model              c32instrument_name              
[35] c33platform_parameters           c34sequence_space               
[37] c35base_caller                   c36quality_scorer               
[39] c37number_of_levels              c38multiplier                   
[41] c39qtype                         c40experiment_url_link          
[43] c41experiment_entrez_link        c42experiment_attribute         
[45] c43sample_ID                     c44sample_alias                 
[47] c45sample_accession              c46taxon_id                     
[49] c47common_name                   c48anonymized_name              
[51] c49individual_name               c50description                  
[53] c51sample_url_link               c52sample_entrez_link           
[55] c53sample_attribute              c54study_ID                     
[57] c55study_alias                   c56study_accession              
[59] c57study_title                   c58study_type                   
[61] c59study_abstract                c60center_project_name          
[63] c61study_description             c62study_url_link               
[65] c63study_entrez_link             c64study_attribute              
[67] c65related_studies               c66primary_study                
[69] c67submission_ID                 c68submission_accession         
[71] c69submission_comment            c70submission_center            
[73] c71submission_lab                c72submission_date              
[75] c73sradb_updated                
&lt;0 rows&gt; (or 0-length row.names)

$sra_ft_segdir
[1] level            idx              start_block      leaves_end_block
[5] end_block        root            
&lt;0 rows&gt; (or 0-length row.names)

$sra_ft_segments
[1] blockid block  
&lt;0 rows&gt; (or 0-length row.names)

$study
 [1] study_ID             study_alias          study_accession     
 [4] study_title          study_type           study_abstract      
 [7] broker_name          center_name          center_project_name 
[10] study_description    related_studies      primary_study       
[13] sra_link             study_url_link       xref_link           
[16] study_entrez_link    ddbj_link            ena_link            
[19] study_attribute      submission_accession sradb_updated       
&lt;0 rows&gt; (or 0-length row.names)

$submission
 [1] submission_ID          submission_alias       submission_accession  
 [4] submission_comment     files                  broker_name           
 [7] center_name            lab_name               submission_date       
[10] sra_link               submission_url_link    xref_link             
[13] submission_entrez_link ddbj_link              ena_link              
[16] submission_attribute   sradb_updated         
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<div id="dbplyr-basics" class="section level2">
<h2>dbplyr basics</h2>
<p>Use <code>tbl()</code> to create an object that represents a database
table.</p>
<pre class="r"><code>run_db &lt;- tbl(src = mydb, &#39;run&#39;)
run_db</code></pre>
<pre><code># Source:   table&lt;`run`&gt; [?? x 21]
# Database: sqlite 3.46.0 [/data2/sradb/SRAmetadb.sqlite]
   run_ID bamFile run_alias   run_accession broker_name instrument_name run_date
    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;   
 1      1 &lt;NA&gt;    2008-09-12â€¦ DRR000001     &lt;NA&gt;        &lt;NA&gt;            2008-09â€¦
 2      2 &lt;NA&gt;    2008-09-12â€¦ DRR000002     &lt;NA&gt;        &lt;NA&gt;            2008-09â€¦
 3      3 &lt;NA&gt;    DRR000004   DRR000004     &lt;NA&gt;        &lt;NA&gt;            2009-03â€¦
 4      4 &lt;NA&gt;    DRR000005   DRR000005     &lt;NA&gt;        &lt;NA&gt;            2009-03â€¦
 5      5 &lt;NA&gt;    DRR000006   DRR000006     &lt;NA&gt;        &lt;NA&gt;            2009-03â€¦
 6      6 &lt;NA&gt;    DRR000007   DRR000007     &lt;NA&gt;        &lt;NA&gt;            2009-02â€¦
 7      7 &lt;NA&gt;    DRR000363   DRR000363     &lt;NA&gt;        &lt;NA&gt;            2010-02â€¦
 8      8 &lt;NA&gt;    DRR000364   DRR000364     &lt;NA&gt;        &lt;NA&gt;            2010-02â€¦
 9      9 &lt;NA&gt;    DRR000365   DRR000365     &lt;NA&gt;        &lt;NA&gt;            2010-02â€¦
10     10 &lt;NA&gt;    DRR000366   DRR000366     &lt;NA&gt;        &lt;NA&gt;            2010-02â€¦
# â„¹ more rows
# â„¹ 14 more variables: run_file &lt;chr&gt;, run_center &lt;chr&gt;,
#   total_data_blocks &lt;int&gt;, experiment_accession &lt;chr&gt;, experiment_name &lt;chr&gt;,
#   sra_link &lt;chr&gt;, run_url_link &lt;chr&gt;, xref_link &lt;chr&gt;, run_entrez_link &lt;chr&gt;,
#   ddbj_link &lt;chr&gt;, ena_link &lt;chr&gt;, run_attribute &lt;chr&gt;,
#   submission_accession &lt;chr&gt;, sradb_updated &lt;chr&gt;</code></pre>
<p>Select specific fields.</p>
<pre class="r"><code>run_db |&gt;
  select(run_accession, experiment_name)</code></pre>
<pre><code># Source:   SQL [?? x 2]
# Database: sqlite 3.46.0 [/data2/sradb/SRAmetadb.sqlite]
   run_accession experiment_name
   &lt;chr&gt;         &lt;chr&gt;          
 1 DRR000001     DRX000001      
 2 DRR000002     DRX000002      
 3 DRR000004     DRX000003      
 4 DRR000005     DRX000003      
 5 DRR000006     DRX000003      
 6 DRR000007     DRX000003      
 7 DRR000363     DRX000003      
 8 DRR000364     DRX000003      
 9 DRR000365     DRX000003      
10 DRR000366     DRX000003      
# â„¹ more rows</code></pre>
<p>SRA table.</p>
<pre class="r"><code>sra_db &lt;- tbl(src = mydb, &#39;sra&#39;)
sra_db</code></pre>
<pre><code># Source:   table&lt;`sra`&gt; [?? x 75]
# Database: sqlite 3.46.0 [/data2/sradb/SRAmetadb.sqlite]
   sra_ID SRR_bamFile SRX_bamFile SRX_fastqFTP run_ID run_alias    run_accession
    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;        
 1      1 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              1 2008-09-12.â€¦ DRR000001    
 2      2 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              2 2008-09-12.â€¦ DRR000002    
 3      3 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;             11 DRR000003    DRR000003    
 4      4 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              5 DRR000006    DRR000006    
 5      5 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              3 DRR000004    DRR000004    
 6      6 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              7 DRR000363    DRR000363    
 7      7 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              6 DRR000007    DRR000007    
 8      8 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;             10 DRR000366    DRR000366    
 9      9 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              4 DRR000005    DRR000005    
10     10 &lt;NA&gt;        &lt;NA&gt;        &lt;NA&gt;              8 DRR000364    DRR000364    
# â„¹ more rows
# â„¹ 68 more variables: run_date &lt;chr&gt;, updated_date &lt;chr&gt;, spots &lt;dbl&gt;,
#   bases &lt;dbl&gt;, run_center &lt;chr&gt;, experiment_name &lt;chr&gt;, run_url_link &lt;chr&gt;,
#   run_entrez_link &lt;chr&gt;, run_attribute &lt;chr&gt;, experiment_ID &lt;dbl&gt;,
#   experiment_alias &lt;chr&gt;, experiment_accession &lt;chr&gt;, experiment_title &lt;chr&gt;,
#   study_name &lt;chr&gt;, sample_name &lt;chr&gt;, design_description &lt;chr&gt;,
#   library_name &lt;chr&gt;, library_strategy &lt;chr&gt;, library_source &lt;chr&gt;, â€¦</code></pre>
</div>
<div id="end" class="section level2">
<h2>End</h2>
<p>Disconnect.</p>
<pre class="r"><code>DBI::dbDisconnect(mydb)</code></pre>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 4.4.0 (2024-04-24)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 22.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

time zone: Etc/UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    
 [5] purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   
 [9] ggplot2_3.5.1   tidyverse_2.0.0 dbplyr_2.5.0    RSQLite_2.3.7  
[13] DBI_1.2.3       workflowr_1.7.1

loaded via a namespace (and not attached):
 [1] sass_0.4.9        utf8_1.2.4        generics_0.1.3    stringi_1.8.4    
 [5] hms_1.1.3         digest_0.6.35     magrittr_2.0.3    timechange_0.3.0 
 [9] evaluate_0.24.0   grid_4.4.0        fastmap_1.2.0     blob_1.2.4       
[13] rprojroot_2.0.4   jsonlite_1.8.8    processx_3.8.4    whisker_0.4.1    
[17] ps_1.7.6          promises_1.3.0    httr_1.4.7        fansi_1.0.6      
[21] scales_1.3.0      jquerylib_0.1.4   cli_3.6.2         rlang_1.1.4      
[25] munsell_0.5.1     bit64_4.0.5       withr_3.0.0       cachem_1.1.0     
[29] yaml_2.3.8        tools_4.4.0       tzdb_0.4.0        memoise_2.0.1    
[33] colorspace_2.1-0  httpuv_1.6.15     vctrs_0.6.5       R6_2.5.1         
[37] lifecycle_1.0.4   git2r_0.33.0      fs_1.6.4          bit_4.0.5        
[41] pkgconfig_2.0.3   callr_3.7.6       gtable_0.3.5      pillar_1.9.0     
[45] bslib_0.7.0       later_1.3.2       glue_1.7.0        Rcpp_1.0.12      
[49] xfun_0.44         tidyselect_1.2.1  rstudioapi_0.16.0 knitr_1.47       
[53] htmltools_0.5.8.1 rmarkdown_2.27    compiler_4.4.0    getPass_0.2-4    </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
https://docs.mathjax.org/en/latest/web/configuration.html. This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>





</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
